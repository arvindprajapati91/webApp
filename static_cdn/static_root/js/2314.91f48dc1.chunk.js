"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2314],{99422:(e,t,s)=>{s.d(t,{A:()=>j});var a=s(65043),i=s(66978),l=s(10615),o=s(35475),n=s(16023),r=s(51505),d=s(51847),c=s(87024),h=s(44013),p=s(50326),m=s(96209),g=s(25663),x=s(86178),u=s.n(x),A=s(70579);class f extends a.Component{constructor(e){super(e),this.sendFormRequest=e=>{this.props.parentCallback(e.target.id)},this.showAuditTrailUserMaster=async e=>{console.log(this.props.slug_id),this.setState({open:!0}),await fetch(`/common-app/userMaster/userMasterAuditTrailAPI/?slug=${this.props.slug_id}&page_size=100000000`).then((e=>{if("Internal Server Error"===e.statusText){var t=window.location.origin;window.location.replace(t)}e.json().then((e=>{this.setState({auditTrail:e.results})}))}))},this.showAuditTrail=async e=>{console.log(this.props.slug_id),this.setState({open:!0}),await fetch(`/common-app/auditTrail/auditTrailViewAPI/?record_no=${this.props.recordNo}&table_name=${this.props.tableName}&page_size=100000000`).then((e=>{if(!e.ok){var t=window.location.origin;window.location.replace(t)}e.json().then((e=>{this.setState({auditTrail:e.results})}))}))},this.state={importDisplay:this.props.importDisplay,open:!1,auditTrail:[]}}render(){const e=[{dataField:this.props.list_page.includes("userMaster")?"user_name":"record_no",text:this.props.list_page.includes("userMaster")?"User Name":"Record No"},{dataField:"process_desc",text:"Process"},{dataField:"action_desc",text:"Action"},{dataField:"action_by",text:"Action By"},{dataField:"action_date",text:"Action Date",formatter:e=>u()(e).format("DD-MMM-YYYY HH:MM:SS A")},{dataField:"changes",text:"Changes"}];return(0,A.jsxs)("div",{className:"row form-name-row",style:{marginTop:"3px"},children:[(0,A.jsx)("div",{className:"col-lg-2 col-md-2 col-sm-2",style:{margin:"0px",paddingTop:"3px"},children:(0,A.jsx)("span",{style:{color:"brown",fontSize:"15px"},children:this.props.form_name})}),(0,A.jsx)("div",{className:"col-lg-7 col-md-7 col-sm-7",style:{margin:"0",display:"flex"},children:(0,A.jsx)(i.A,{placement:"bottom",overlay:(0,A.jsx)(l.A,{id:"tooltip-disabled",children:"Please use this option to import data from Excel File"}),children:(0,A.jsxs)("div",{className:"input-group input-group-sm",style:{display:!0===this.state.importDisplay?"flex":"none"},children:[(0,A.jsx)("input",{className:"form-control",style:{width:"50%"},type:"file",id:"formFile",onChange:this.props.fileSelection}),(0,A.jsx)("span",{className:"btn btn-danger",style:{textDecoration:"none",color:"white"},onClick:this.props.import_data,children:"Import"})]})})}),(0,A.jsxs)("div",{className:"col-lg-3 col-md-3 col-sm-3",style:{margin:"0px",paddingTop:"3px"},children:[(0,A.jsxs)(o.N_,{to:window.location.pathname.includes("pending")?`${this.props.list_page}/pendingApproval`:this.props.list_page,className:"back_to_list",style:{fontWeight:"500",color:"black",textDecoration:"none",cursor:"pointer",float:"right"},children:[(0,A.jsx)("svg",{style:{color:"brown",marginRight:"5px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-left-circle-fill",viewBox:"0 0 16 16",children:(0,A.jsx)("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})}),(0,A.jsx)("span",{style:{color:"black"},children:"Back to List"})]}),"Yes"===this.props.auditTrailView?(0,A.jsxs)("div",{className:"audit_trail",id:"audit_trail",style:{fontWeight:"500",color:"black",textDecoration:"none",cursor:"pointer",float:"right",paddingLeft:"10px",paddingRight:"10px"},onClick:this.showAuditTrail,children:[(0,A.jsxs)("svg",{height:"18px",version:"1.1",viewBox:"0 0 20 21",width:"20px",children:[(0,A.jsx)("title",{}),(0,A.jsx)("desc",{}),(0,A.jsx)("defs",{}),(0,A.jsx)("g",{fill:"none","fill-rule":"evenodd",id:"Page-1",stroke:"none","stroke-width":"1",children:(0,A.jsx)("g",{fill:"#004a5d",id:"Core",opacity:"0.9",transform:"translate(-464.000000, -254.000000)",children:(0,A.jsx)("g",{id:"history",transform:"translate(464.000000, 254.500000)",children:(0,A.jsx)("path",{d:"M10.5,0 C7,0 3.9,1.9 2.3,4.8 L0,2.5 L0,9 L6.5,9 L3.7,6.2 C5,3.7 7.5,2 10.5,2 C14.6,2 18,5.4 18,9.5 C18,13.6 14.6,17 10.5,17 C7.2,17 4.5,14.9 3.4,12 L1.3,12 C2.4,16 6.1,19 10.5,19 C15.8,19 20,14.7 20,9.5 C20,4.3 15.7,0 10.5,0 L10.5,0 Z M9,5 L9,10.1 L13.7,12.9 L14.5,11.6 L10.5,9.2 L10.5,5 L9,5 L9,5 Z",id:"Shape"})})})})]}),(0,A.jsx)("span",{style:{color:"black",paddingLeft:"3px"},children:"Audit Trail"})]}):""]}),(0,A.jsxs)(n.A,{centered:!1,open:this.state.open,onClose:()=>this.setState({open:!1}),onOpen:()=>this.setState({open:!0}),children:[(0,A.jsxs)(r.A,{children:["Audit Trail of ",this.props.recordNo]}),(0,A.jsx)(d.A,{children:(0,A.jsx)(c.A,{children:(0,A.jsx)(m.A,{keyField:"record_no",data:this.state.auditTrail,columns:e,striped:!0,hover:!0,condensed:!0,pagination:(0,g.Ay)(),noDataIndication:"No records found"})})}),(0,A.jsx)(h.A,{children:(0,A.jsx)(p.A,{onClick:()=>this.setState({open:!1}),children:"OK"})})]})]})}}const j=f},86985:(e,t,s)=>{s.d(t,{A:()=>a});const a=function(e){e.includes("Unexpected")||e.includes("Failed to fetch")?(this.setState({loading:this.state.loading=!1}),alert("Something went wrong!")):this.setState({loading:this.state.loading=!1})}},8900:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(65043),i=s(70579);class l extends a.Component{render(){return(0,i.jsxs)("div",{id:"error_alert",className:"alert alert-warning alert-dismissible "+(this.props.err_msg_visible?"alert-shown":"alert-hidden"),role:"alert",style:{display:this.props.err_msg_visible?"block":"none"},children:[(0,i.jsx)("strong",{children:"Error :"})," ",this.props.error_message]})}}const o=l},76309:(e,t,s)=>{s.d(t,{A:()=>a});const a=function(){if(window.innerWidth<="767"){const e=document.getElementById("side-nav-bar");e.classList.contains("sidebar-transform")&&e.classList.remove("sidebar-transform")}}},72314:(e,t,s)=>{s.a(e,(async(e,a)=>{try{s.r(t),s.d(t,{default:()=>b});var i=s(65043),l=s(73216),o=s(99422),n=s(76309),r=s(42406),d=s(8900),c=(s(83910),s(28068),s(83003)),h=s(31924),p=s(18148),m=(s(86178),s(8858)),g=s(86985),x=s(70579),u=e([m]);m=(u.then?(await u)():u)[0];const A=`/common-app/${"sampleRegistration"}`,f="Sample Registration",j="Transaction",w=e=>({adminAccess:e.adminAccess,navOrgName:e.navOrgName}),_={from_date:"",to_date:"",service_type:"Regular",loading:!1};class v extends i.Component{constructor(e){super(e),this.handleChange=(e,t)=>{let{name:s,value:a}=t;this.state.hasOwnProperty(s)&&this.setState({[s]:a})},this.drpHandleChange=e=>{this.setState({[e.target.name]:e.target.value})},this.downloadReport=async e=>{const t={method:"POST",headers:(0,m.A)(),body:JSON.stringify(this.state)};try{let e="/common-app/sampleTestResult/downloadReport/";const s=await fetch(e,t);if(s.ok){const e=await s.blob();if(e.size>0){let t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="report.csv",s.click(),this.setState({loading:!1})}else this.setState({loading:this.state.loading=!1}),alert("Something went wrong, kindly check with administrator")}}catch(e){let t=e.message;g.A.call(this,t)}},this.state=_}render(){const{error_message:e,redirect:t}=this.state;return t?(0,x.jsx)(l.C5,{to:A}):(0,x.jsx)("div",{className:"wrapper",children:(0,x.jsxs)("div",{className:"content-wrapper",onClick:n.A.bind(this),children:[(0,x.jsx)(o.A,{form_name_list:f,form_name:f,form_type:j,list_page:A,auditTrailView:"Yes",recordNo:this.state.document_no,tableName:"sample_registration"}),(0,x.jsx)(r.A,{load:this.state.loading}),(0,x.jsx)(d.A,{error_message:e,err_msg_visible:this.state.err_msg_visible}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-2 col-md-2 col-sm-2 did-floating-label-content",children:[(0,x.jsxs)("select",{className:"did-floating-select",name:"service_type",id:"service_type",value:this.state.service_type,onChange:this.drpHandleChange,onClick:this.drpHandleChange,onFocus:this.drpHandleChange,children:[(0,x.jsx)("option",{value:"",children:"---Select---"}),(0,x.jsx)("option",{value:"inward",children:"Inward Report"}),(0,x.jsx)("option",{value:"sr",children:"Sample Register"}),(0,x.jsx)("option",{value:"tr",children:"Test Result"})]}),(0,x.jsx)("label",{className:"did-floating-label",children:"Report Type"})]}),(0,x.jsxs)("div",{className:"col-lg-2 col-md-2 col-sm-2 did-floating-date-content",children:[(0,x.jsx)(h.J3,{id:"from_date",className:"floating_date_input",name:"from_date",dateFormat:"DD-MMM-YYYY",value:this.state.from_date,iconPosition:"left",placeholder:"DD-MMM-YYYY",onChange:this.handleChange,icon:"calendar alternate",clearable:!0,clearIcon:(0,x.jsx)(p.A,{name:"remove",colour:"red",className:"calender_icon"}),required:!0}),(0,x.jsxs)("label",{className:"did-floating-label floating_date_label",children:["From Date ",(0,x.jsx)("span",{className:"mandatory_field",children:"*"})]}),(0,x.jsx)("div",{className:"form-helper helper_hide",id:"from_date_helper",children:"Required"})]}),(0,x.jsxs)("div",{className:"col-lg-2 col-md-2 col-sm-2 did-floating-date-content",children:[(0,x.jsx)(h.J3,{id:"to_date",className:"floating_date_input",name:"to_date",dateFormat:"DD-MMM-YYYY",value:this.state.to_date,iconPosition:"left",placeholder:"DD-MMM-YYYY",onChange:this.handleChange,icon:"calendar alternate",clearable:!0,clearIcon:(0,x.jsx)(p.A,{name:"remove",colour:"red",className:"calender_icon"})}),(0,x.jsx)("label",{className:"did-floating-label floating_date_label",children:"To Date"}),(0,x.jsx)("div",{className:"form-helper helper_hide",id:"to_date_helper",children:"Required"})]}),(0,x.jsx)("div",{className:"col-lg-2 col-md-2 col-sm-2 did-floating-date-content",children:(0,x.jsx)("button",{class:"btn btn-success",id:"submitBtn",onClick:this.downloadReport,children:"Download"})})]})]})})}}const b=(0,c.Ng)(w)(v);a()}catch(A){a(A)}}))},28068:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACN0lEQVRo3u1ZS0/CQBA2vg4efZx8/AkjkRs3Q2jTlqTB6N2/oPHECbyjUeI/wPSRVLx48Ddo8Af4OAl4pl5wBmsUEsJud7vdaieZhFBov293duab6dRUaqmlxmxmw5xRbCNbcLVj1dGtgqM/Ko7+Dp8/0PEzXG8NruFvrOJ2uVyejh245mrrqm2cALhXANmn9BfF1ap5q7gmHHi+Ya7AatYBhB8C+Kj7QORc9dRlIeBVV9uDh3Y5AB/1TsE2diMDvlk/mINQuYwA+JADiQt8Ft9V99QFuPlN1OB/eROfyW/lxYL/9lvIbvPMBESEzViHw80Kfj828D8kSqHAG7axBDdox04AMl6oFBvk+b4MDpX9jK5QQXVkLVKjxlrsYBc2yFcf5QHjqnEmgGehSgQeRdZAp8hGAPQWikaSzJPlEbfcCXx5ZiIBlLuyEoDQPiLZAVvaHbCNKxICLWl3wNEfJhOgkMq8jIJEm4SALzGB3r8gkPAQSvwhTnoalbmQAbbDyUIOhk7ShpBV3CIVc88SEnginuahdJWQQCXJDU1P8ZRVuoYeJgKytJTgNeqeeKdhLkrS1HdCz01xVhl7Q28bJtNsCGeVMc6ETvm8vHB0RzR4mIJf5+5yszyHu02BBDxuw92hIa+IzARhw23lx6TXUkTZ6Y35wNLMTXHcNygw7MDxHjVM28LflWF1DGRHGO2E/6lQV9goLBCAGZzboGbHxiPo7PzAu/D9PV5DSYyqUorXrKml9gfsE+XjbLF2yWl6AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=2314.91f48dc1.chunk.js.map